# This file is generated by chef
# Any manual changes will be overwritten!
# To make changes, edit the template in the kafka cookbook

# The number of milliseconds of each tick
tickTime=<%= node['kafka']['zk_tickTime'] %>

# The number of ticks that the initial synchronization phase can take
initLimit=<%= node['kafka']['zk_initLimit'] %>

# The number of ticks that can pass between
# sending a request and getting an acknowledgement
syncLimit=<%= node['kafka']['zk_syncLimit'] %>

# the directory where the snapshot is stored.
# Choose appropriately for your environment
dataDir=<%=node['kafka']['zk_install_dir'] %>/<%= node['kafka']['zk_dataDir'] %>

# the directory where transaction log is stored.
# this parameter provides dedicated log device for ZooKeeper
dataLogDir=<%=node['kafka']['zk_install_dir'] %>/<%= node['kafka']['zk_dataLogDir'] %>

# the port at which the clients will connect
clientPort=<%= node['kafka']['zk_clientPort'] %>

# The following are from "Building an Impenetrable ZooKeeper"
maxClientCnxns=<%= node['kafka']['zk_maxClientCnxns'] %>
maxSessionTimeout=<%= node['kafka']['zk_maxSessionTimeout'] %>

# The number of snapshots to retain in dataDir
autopurge.snapRetainCount=<%= node['kafka']['zk_autopurge_snapRetainCount'] %>
# Purge task interval in hours
# Set to "0" to disable auto purge feature
autopurge.purgeInterval=<%= node['kafka']['zk_autopurge_purgeInterval'] %>

# ZooKeeper server and its port no.
# ZooKeeper ensemble should know about every other machine in the ensemble
# specify server id by creating 'myid' file in the dataDir
# use hostname instead of IP address for convenient maintenance
<% @ip_to_id_map.each do |key, value| -%>
server.<%= value %>=<%= key %>:<%= node['kafka']['zk_quorum_port'] %>:<%= node['kafka']['zk_election_port'] %>
<%- end %>