# This file is generated by chef
# Any manual changes will be overwritten!
# To make changes, edit the template in the kafka cookbook
#

#!/bin/bash
 
ERRORPATTERN='ERROR|Exception'
if [ $# -gt 0 ]; then
   ERRORPATTERN=$1
fi
 
kflogcriticals="$(/opt/nagios/libexec/check_logfiles --noprotocol --tag=kafka_errlog --logfile=/var/log/kafka/server.log --warningpattern='WARN' --criticalpattern=${ERRORPATTERN} | cut -d\| -f2 | sed 's/ /\n/g' | grep criticals | cut -d= -f2)"
 
echo {\"kafka_log_criticals\": $kflogcriticals}